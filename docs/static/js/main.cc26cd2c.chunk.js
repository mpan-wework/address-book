(this["webpackJsonp@mpan-wework/address-book"]=this["webpackJsonp@mpan-wework/address-book"]||[]).push([[0],{134:function(e,t,n){e.exports={App:"App_App__16ZpL"}},138:function(e,t,n){e.exports=n(267)},266:function(e,t,n){},267:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(26),o=n.n(c),i=n(78),u=n(36),l=n(37),d=n.n(l),s=n(53),f=n(88),p=n(270),m=n(269),b=n(44),O=[{id:501,name:"Khall Zhang",location:"Shanghai",office:"C-103",phoneOffice:"x55778",phoneCell:"650-353-1239"},{id:502,name:"Khall Zhang",location:"Shanghai",office:"C-103",phoneOffice:"x55778",phoneCell:"650-353-1239"}],k=function(e){return new Promise((function(t){setTimeout((function(){t(e)}),2e3)}))},h={fetchRecords:function(){var e=Object(s.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k(O));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),updateRecords:function(){var e=Object(s.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.info("updateRecords:",t),e.abrupt("return",k(t.map((function(e){return e.id?Object(u.a)(Object(u.a)({},e),{},{editable:!1}):Object(u.a)(Object(u.a)({},e),{},{key:null,id:Math.floor(Date.now()/1e3)%1e5})}))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteRecords:function(){var e=Object(s.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.info("deleteRecords:",t),e.abrupt("return",k(null));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=n(54),v=n.n(j),E={name:"",location:"",office:"",phoneOffice:"",phoneCell:""},C=function(){var e=Object(a.useState)([]),t=Object(f.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),l=Object(f.a)(o,2),O=l[0],k=l[1],j=Object(a.useState)([]),C=Object(f.a)(j,2),_=C[0],x=C[1];Object(a.useEffect)((function(){Object(s.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,h.fetchRecords();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[c]);var w=Object(a.useMemo)((function(){return{selectedRowKeys:_,onChange:x}}),[_,x]);Object(a.useEffect)((function(){x((function(e){return n.concat(O).map((function(e){return e.id||e.key})).filter((function(t){return e.includes(t)}))}))}),[n,O,x]);var y=Object(a.useCallback)(Object(s.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.deleteRecords(_);case 2:c((function(e){return e.filter((function(e){return!_.includes(e.id)}))})),k((function(e){return e.filter((function(e){return!_.includes(e.key)}))}));case 4:case"end":return e.stop()}}),e)}))),[_,c,k]),A=Object(a.useMemo)((function(){return _.map((function(e){return n.find((function(t){return t.id===e}))})).filter(Boolean)}),[_,n]),S=Object(a.useCallback)((function(){k((function(e){return e.concat(Object(u.a)(Object(u.a)({},E),{},{key:Date.now()}))}))}),[k]),g=Object(a.useMemo)((function(){return n.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{key:e.id})})).concat(O)}),[n,O]),R=Object(a.useCallback)((function(e,t){return function(n){var a=n.target.value,r=function(n){var r=n.findIndex((function(t){return e.id?e.id===t.id:e.key===t.key}));return-1===r?n:n.slice(0,r).concat(Object(u.a)(Object(u.a)({},n[r]),{},Object(i.a)({},t,a))).concat(n.slice(r+1))};c(r),k(r)}}),[c,k]),B=Object(a.useCallback)((function(e){return function(t,n){return n.id?r.a.createElement("div",null,t):r.a.createElement(p.a,{value:t,onChange:R(n,e)})}}),[R]),N=Object(a.useCallback)((function(e){return function(){if(e.id&&!e.editable){c((function(t){var n=t.findIndex((function(t){return e.id===t.id}));return-1===n?t:t.slice(0,n).concat(Object(u.a)(Object(u.a)({},t[n]),{},{editable:!0})).concat(t.slice(n+1))}))}}}),[c]),I=Object(a.useCallback)((function(e,t){return!t.id||t.editable?r.a.createElement(p.a,{value:e,onChange:R(t,"phoneCell")}):r.a.createElement("div",{onClick:N(t)},e)}),[R,N]),D=Object(a.useCallback)(Object(s.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.map((function(e){var t=n.find((function(t){return t.id===e}));if(t)return t;var a=O.find((function(t){return t.key===e}));return a||null})).filter(Boolean),e.next=3,h.updateRecords(t);case 3:a=e.sent,c((function(e){for(var t=function(t,n){var r=e.findIndex((function(e){return e.id===a[t].id}));e=-1===r?e.concat(a[t]):e.slice(0,r).concat(a[t]).concat(e.slice(r+1))},n=0,r=a.length;n<r;n+=1)t(n);return e})),k((function(e){return e.filter((function(e){return!_.includes(e.key)}))})),x((function(e){return e.filter((function(e){return!_.includes(e)}))}));case 7:case"end":return e.stop()}}),e)}))),[_,n,O,c,k,x]);return r.a.createElement("div",{className:"addressBook"},r.a.createElement("div",{className:v.a.title},"Address Book"),r.a.createElement(m.a,{dataSource:g,pagination:!1,rowSelection:w},r.a.createElement(m.a.Column,{key:"id",title:"ID",dataIndex:"id"}),r.a.createElement(m.a.Column,{key:"name",title:"Name",dataIndex:"name",render:B("name")}),r.a.createElement(m.a.Column,{key:"location",title:"Location",dataIndex:"location",render:B("location")}),r.a.createElement(m.a.Column,{key:"office",title:"Office",dataIndex:"office",render:B("office")}),r.a.createElement(m.a.ColumnGroup,{key:"phone",title:"Phone"},r.a.createElement(m.a.Column,{key:"phoneOffice",title:"Office",dataIndex:"phoneOffice",render:B("phoneOffice")}),r.a.createElement(m.a.Column,{key:"phoneCell",title:"Cell",dataIndex:"phoneCell",render:I}))),r.a.createElement("div",{className:v.a.buttons},r.a.createElement("div",{className:v.a.left},r.a.createElement(b.a,{className:v.a.delete,disabled:0===A.length,onClick:y},"Delete")),r.a.createElement("div",{className:v.a.right},r.a.createElement(b.a,{className:v.a.update,disabled:0===_.length,onClick:D},"Update"),r.a.createElement(b.a,{className:v.a.add,onClick:S},"Add"))))},_=function(){return r.a.createElement("div",null,"AddressBook")},x=n(134),w=n.n(x),y="expected"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_VERSION:"0.1.0"}).SOME_VAR?_:C,A=function(){return r.a.createElement("div",{className:w.a.App},r.a.createElement(y,null))};n(265),n(266);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root"))},54:function(e,t,n){e.exports={title:"AddressBook_title__2NaZR",buttons:"AddressBook_buttons__3YkxJ",left:"AddressBook_left__3OjMk",right:"AddressBook_right__3O7Ld",delete:"AddressBook_delete__3ZrD3",update:"AddressBook_update__259iL",add:"AddressBook_add__czPnY"}}},[[138,1,2]]]);
//# sourceMappingURL=main.cc26cd2c.chunk.js.map